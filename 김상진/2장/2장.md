# 운영체제의 소개

# OverView

![Untitled](https://user-images.githubusercontent.com/23889744/134153934-83bdfaf0-6dde-4b00-b306-5bd20016e45e.png)

![Untitled 1](https://user-images.githubusercontent.com/23889744/134153980-021d2cea-695c-48bd-a1a0-3c7ab441a1f1.png)

_<시스템 라이브러리 = 시스템 콜 인터페이스>_

OS는 사용자가 사용하는 애플리케이션 영역과 컴퓨터의 하드웨어 부분 중간에 위치하여 사용자에게 프로그램을 효율적으로 사용할 수 있게끔 하는 **편리성** 을 제공하며, 컴퓨터 자원(하드웨어)를 효율적으로 관리하는(**효율성**) 역할을 한다

<br>

## Kernel

커널은 운영체제의 핵심 구성 요소 중 하나인데, 커널은 시스템 콜을 사용하여 애플리케이션과 컴퓨터자원(하드웨어)사이에 위치하여 애플리케이션이 하드웨어에서 오는 데이터를 관리하고 사용할 수 있게끔 해주는 인터페이스 역할을 한다.

![Untitled 2](https://user-images.githubusercontent.com/23889744/134154061-394dbbe0-6af5-40b5-875b-e28b57ebf6a5.png)

커널의 역할을 정리해 보자면

- 메모리 관리
- 디스크 관리
- 작업 관리(task)
- 메모리에 로드될 프로세스를 결정
- 애플리케이션이 하드웨어의 데이터를 처리하기 위해 둘 사이의 중간에 위치하여 인터페이스 역할을 함

커널은 운영체제가 로드될때 먼저 메모리에 로드되고 운영체제가 종료될때 까지 메모리에 남아있게 된다.

<br>

## System Call Interface

사용자가 커널을 직접 제어하게 된다면 OS가 컴퓨터 자원을 관리하는데에 문제가 발생할 수 있기때문에 시스템 콜 인터페이스를 통해서 기능을 사용하게 하는 것이다.

커널이 제공하는 기능중에 사용자가 사용할 수 있는 기능을 모아놓은 것을 시스템 콜 인터페이스인 것이다.

<br>

---

# 운영체제 구분

## 동시 사용자 수의 따른 구분

- 단일 사용자(Single User)
- 다중 사용자(Multi User)
  - **동시에** 여러명이 사용하는 시스템

## 동시 실행 프로세스 수의 따른 구분

- 단일 프로세스(Sing tasking)
  - 하나의 작업(프로세스)만 수행함
    - 하나의 프로그램이 끝나야지 다른 프로그램을 사용할 수 있음
  - ex> MS-DOS
- 다중 프로세스(Multi tasking)
  - **동시에** 여러 작업(프로세스) 수행
    - 여러 프로그램이 동시에 수행되기 때문에 동기화 관리가 필요함
  - ex> Linux, Windows 등

<br>

## 작업 수행 방식에 따른 구분

### 일괄 처리 시스템(Batch)

작업들을 들어올때마다 바로 처리해야 한다면 A작업의 환경과 B작업의 환경이 다른경우가 있을 수 있다.

이때 A 작업을 처리 하기 위해서는 작업환경 A에서 진행해야 하고 B 작업을 처리해야 하기 위해서는 작업환경 B에서 작업을 처리해야하는데, 작업을 전환하는 시간이 작업을 처리하는 시간보다 더 길어 질수도 있다.

그래서 작업의 전환 시간을 줄이기 위해 각각의 작업들을 분류해서 모아놓았다가 일정 시점이 되면 작업을 한꺼번에 처리하는 것을 **일괄 처리** 라고 한다.

<br>

> **_시스템이 좋아하는 처리 시스템이다(System-Oriented)_**

작업을 모아 한꺼번에 처리하고, 처리 시점에 한번만 작업 환경을 바꾸기 때문에 시스템 입장에서 **처리 효율(Throughput)**이 향상 된다.

<br>

> **_사용자 입장에서는 생산성이 저하되는 시스템이다_**

사용자는 작업의 결과를 받을때 까지 비슷한 유형의 작업이 모이기 까지를 기다려야 한다(**긴 응답성**)

운이 좋게 사용자가 작업을 제출한 이후에 바로 작업이 시작될수도 있지만, 작업을 제출한 시점이 작업이 얼마 쌓이지 않은 시점이라면 대기시간이 더 길어질 것이다.

<br>

### 시분할 처리 시스템(Time-sharing)

![Untitled 3](https://user-images.githubusercontent.com/23889744/134154255-b7e91654-b06e-4a1b-8df8-23258042068d.png)

**_<일정 시간만큼 A 처리→ A 대기 → B 처리 → B 대기 → C 처리 → C 대기 → ......>_**

일괄처리 시스템의 단점인 작업이 끝날때까지 대기해야하는 즉, 긴 응답시간을 줄이기 위해 각각의 작업(그림에서는 프로그램)을 일정 시간만큼 번갈아 가면서 수행하는 시스템이다.

여러 사용자가 동시에 자원을 사용하기 때문에 파일 시스템이나, 가상 메모리 개념이 나오게 된다.

![Untitled 4](https://user-images.githubusercontent.com/23889744/134154315-a4723604-5cb3-4696-8002-79976495a6dc.png)

**_<실제 연산을 처리하는 시스템은 한대이지만, 사용자들은 각자의 단말장치(터미널)을 통해 한대의 컴퓨터를 이용하여 작업을 하게 된다.>_**

- 대화형 시스템
- 단말기 사용(그림에서는 터미널)

<br>

> **_응답시간이 단축됬고, 생산성이 향상됬다._**

여러 작업을 번갈아 가면서 처리 하였기 때문에 프로세서의 유휴시간이 감소 되었고, 사용자의 대기시간이 줄어들었다. 그로 인해 생산성 또한 향상 되었다.

<br>

> **_단말기 접속을 통한 통신 비용 증가와 보안문제, 사용자가 많아질수록 느려지는 속도_**

시스템을 사용하기 위해 단말기 접속이 필요한데 접속을 하기 위한 통신 비용이 증가되었고 통신을 함으로써 보안문제가 발생하였다.

또한 한대의 시스템을 사용하는 사용자가 많아질수록 사용자 개개인의 작업 체감속도가 느려지게 된다.(사용자가 많아질수록 시스템의 부하가 많아짐)

<br>

### 분산처리 시스템(Distributed)

분산처리 시스템은 여러개의 컴퓨터가 동일한 작업을 처리하기 위해 네트워크상에서 서로 통신하는 시스템이다

분산처리 시스템을 구축하는 이유는

- 성능상의 이점
  - 여러개의 시스템을 병렬로 연결하여 성능상의 이점을 끌어낼수있다
  - ex> 사용자의 요청을 받는 WAS를 여러개 두어 더 많은 사용자의 요청을 받게 할 수 있다(Scale Out)
- 장애허용(Fault Tolerance)
  - 여러개의 시스템중 하나가 장애가 발생하여도 다른 한대로 장애를 극복 할 수 있다
  - ex> LB(로드밸런서)에 의해 장애가 발생한 시스템을 감지하여 장애가 발생하지 않은 시스템으로 사용자의 요청을 보낼수있다.
- 보안성
- 네트워크를 이용하여 물리적으로 분리된 환경에서 사용 가능

등 이 있다.

분산처리 시스템의 목표중 하나는 확장성이다. 예를들어 서비스를 이용하는 사용자가 폭발적으로 늘게된다면 기존의 요청을 받는 서버 한대로 많은 사용자를 받아들이기는 쉽지 않을것이다. 이떄 2가지 선택이 있는데 **첫번째는 요청 서버의 성능을 더 늘리기, 두번째는 요청 서버를 여러대 두어 요청 분산하기.**

<br>

> **_요청 서버의 성능을 더 늘리기(Scale Up)_**

서버의 성능을 늘리면 기존의 사양보다 더 좋은 CPU, 메모리 등을 추가로 구매하여 성능을 업그레이드 시켜야 하는데 한대의 성능을 계속해서 업그레이드 하는것은 한계가 있기 때문에 근본적으로 많은 사용자의 요청을 해결 할 수는 없다.

<br>

> **_요청 서버를 여러대 두어 요청 분산하기(Scale Out)_**

비슷한 성능의 서버를 여러대 두어 사용자의 요청을 받는 것이다. 서버 한대의 성능을 계속해서 업그레이드 하는 방법보다는 무한정으로 늘어나는 사용자의 요청을 여러대의 서버로 요청을 처리 할 수 있을것이다.

예전에 Scale Up과 Scale Out에 대해서 공부한적이 있는데 아래 **참고**에 링크를 걸어두었으니 읽어봐도 좋을것 같다.

<br>

### 실시간 처리 시스템(Real Time)

데이터의 입력과 동시에 그에 대한 반응이 즉시 처리되는 시스템이다. 제한 시간 내에 응답을 제공하는 것이 자원 활용 효율보다 더 중요하다.

실시간 처리 시스템은 입력에 대한 응답 시간 제약을 지켰을때 시스템에 치명적인 영향을 주는지 안주는지에 따라 구분할 수 있다.

- Hard-real Time task(경성 실시간 처리 시스템)
  - ex> 원자력 발전소 제어 등
- Soft-real Time Task(연성 실시간 처리 시스템)
  - ex> 동영상 재생 등

<br>

---

# 운영체제 구조

## 단일 구조

![Untitled 5](https://user-images.githubusercontent.com/23889744/134154383-f92aa685-00a9-4622-8191-450b96ac7d58.png)

**_<운영체제의 기능을 하나의 커널안에 모두 모아놓은 구조>_**

한 커널 안에 있는 모듈간 통신이 쉽고 자원이 효율적으로 관리되게 되지만, 커널이 커지면서 모듈 한군데에서 오류가 발생하면 다른 모듈에도 영향을 끼치게 되며 한군데에 모듈이 몰아져 있어서 유지보수가 어렵다는 단점이 있다.

<br>

## 계층 구조

![Untitled 6](https://user-images.githubusercontent.com/23889744/134154419-e413f413-0aa3-418a-864c-cb7a5e375d1d.png)

**_<기능별로 모듈을 나누어서 계층적으로 묶어놓은 형태>_**

한 커널안에 있는 모듈들을 기능별로 묶어서 계층으로 묶어놓은 형태이다.

기능별로 모듈화가 되어있어 유지보수나 오류 발생시 오류가 발생한 계층만 검사하면 되기 때문에 검증이나 수정이 쉽다. 하지만 단일구조에 비해 어떤 계층의 기능을 이용하려면 여러 계층을 거쳐야 하는 단점이 있다.

<br>

## 마이크로 커널 구조

![Untitled 7](https://user-images.githubusercontent.com/23889744/134154444-157bf9b6-1ecc-4273-9006-01117b05c5c2.png)

**_<커널의 크기를 최소화>_**

커널에는 핵심기능만 남겨놓고(핵심기능은 정의하기 나름) 나머지 기능들은 사용자 영역에서 처리하는 구조.

<br>

---

# 운영체제 기능

- 프로세스 관리
- 프로세서 관리
- 메모리 관리
- 파일 관리
- 입출력 관리
- 보조 기억 장치 및 기타 주변장치 관리

## 프로세스 관리

프로세스는 프로세서와는 구분되는 것으로, 커널에 등록된 실행단위이며 실행중인 프로그램으로 봐도 무방하다. 운영체제가 관리하는 대표적인 SW 리소스 이다.

![Untitled 8](https://user-images.githubusercontent.com/23889744/134154495-8011ae56-0df1-40f6-b4f4-0dd2331d61e4.png)

**_<작업 관리자의 프로세스 탭에 나와있는 것들이 프로세스이다.>_**

### 운영체제의 프로세스 관리 기능

- 프로세스 생성, 삭제 혹은 상태 관리
- 실행될 프로세스에 메모리를 할당
- 프로세스간에 통신
- 교착상태(deadlock) 해결

![Untitled 9](https://user-images.githubusercontent.com/23889744/134154527-e8ecf14e-01c2-4d94-954a-fb1f9a6623a6.png)

- 프로세스 정보 관리
  - PCB: 프로세스에 대한 정보가 저장되어 있는 자료

<br>

> **_교착상태?_**

여러 프로세스가 하나의 자원을 두고 무한정 대기하거나 자원을 요구하는 현상이다.

![Untitled 10](https://user-images.githubusercontent.com/23889744/134154569-bf0131e7-ed7c-4adb-823f-8e195cff9096.png)

<**_예를 들어 도로위의 상황이 그림과 같을때 도로위의 자동차들을 정리하는 대상이 운영체제라고 보면 될 것 같다.>_**

<br>

## 프로세서 관리

넓은의미로 프로세서를 CPU로 봐도 무방하다. 프로세서(CPU)는 프로그램을 실행시키는 자원이다.

- 프로세스 스케쥴링
  - 프로세서가 처리되는 순서를 결정 한다
- 프로세서 할당 관리
  - 프로세서는 하나의 프로세스를 할당 받을 수 있는데 프로세스들에 대한 프로세서를 할당해주는 것이 운영체제이다.

<br>

---

# 참고

[스케일업과 스케일 아웃을 이용한 시스템 확장](https://velog.io/@sjhello/%EC%8A%A4%EC%BC%80%EC%9D%BC%EC%97%85%EA%B3%BC-%EC%8A%A4%EC%BC%80%EC%9D%BC-%EC%95%84%EC%9B%83%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%99%95%EC%9E%A5)

[다중 서버 환경에서는 어떻게 데이터 정합성 문제 해결할까?](https://velog.io/@sjhello/%EB%8B%A4%EC%A4%91-%EC%84%9C%EB%B2%84-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%ED%95%A9%EC%84%B1-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%ED%95%A0%EA%B9%8C)
